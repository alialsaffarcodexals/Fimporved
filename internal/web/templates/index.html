{{define "index.html"}}{{template "layout.html" .}}{{end}}

{{define "title"}}Forum — Home{{end}}
{{define "content"}}
<div class="grid">
  <aside>
    <div class="card">
      <form method="get" action="/">
        <label>Category</label>
        <select name="category">
          <option value="">All</option>
          {{range .Categories}}
            <option value="{{.}}" {{if eq $.Filter.category .}}selected{{end}}>{{.}}</option>
          {{end}}
        </select>
        <label>My posts</label>
        <input type="checkbox" name="mine" value="1" {{if eq .Filter.mine "1"}}checked{{end}}>
        <label>Liked posts</label>
        <input type="checkbox" name="liked" value="1" {{if eq .Filter.liked "1"}}checked{{end}}>
        <div class="mt-8"><button class="btn primary" type="submit">Apply</button></div>
      </form>
    </div>
  </aside>
  <section>
    {{range .Posts}}
      <article class="card">
        <h3 class="mt-0 mb-6"><a href="/post?id={{.ID}}">{{.Title}}</a></h3>
        <div class="meta">by {{.Username}} • {{.CreatedAt}}</div>
        <p>{{.Body}}</p>
        <div class="stats">👍 {{.Likes}} &nbsp; 👎 {{.Dislikes}}</div>
      </article>
    {{else}}
      <div class="card">No posts yet.</div>
    {{end}}
  </section>
</div>
{{end}}
